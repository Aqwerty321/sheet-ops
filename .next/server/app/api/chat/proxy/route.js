"use strict";(()=>{var e={};e.id=872,e.ids=[872],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},7703:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>y,patchFetch:()=>g,requestAsyncStorage:()=>h,routeModule:()=>l,serverHooks:()=>m,staticGenerationAsyncStorage:()=>x});var o={};r.r(o),r.d(o,{POST:()=>c,PUT:()=>d});var s=r(9303),a=r(8716),n=r(670),u=r(7070);let i="https://agents.toolhouse.ai/c4633142-6a9a-4f8a-817a-9c61c003e248";async function p(e,t){let r;try{r=await e.json()}catch{return u.NextResponse.json({error:"Invalid JSON"},{status:400})}if(!r.message)return u.NextResponse.json({error:"message is required"},{status:400});let o=r.userId||"anonymous",s=r.runId?`${i}/${r.runId}`:i,a=r.runId?"PUT":"POST",n={message:r.message,user_id:o},p=process.env.TOOLHOUSE_API_KEY,c={"Content-Type":"application/json",Accept:"text/event-stream"};p&&(c.Authorization=`Bearer ${p}`);try{let e=await fetch(s,{method:a,headers:c,body:JSON.stringify(n)});if(!e.ok){let t=await e.text();return console.error("Toolhouse request failed:",e.status,t),u.NextResponse.json({error:"Agent request failed",details:t},{status:e.status})}let t=e.headers.get("X-Toolhouse-Run-ID")||"",r=new Headers({"Content-Type":"text/event-stream","Cache-Control":"no-cache",Connection:"keep-alive","X-Toolhouse-Run-ID":t});return new Response(e.body,{status:200,headers:r})}catch(e){return console.error("Chat proxy error:",e),u.NextResponse.json({error:"Failed to connect to agent"},{status:500})}}async function c(e){return p(e,"POST")}async function d(e){return p(e,"PUT")}let l=new s.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/chat/proxy/route",pathname:"/api/chat/proxy",filename:"route",bundlePath:"app/api/chat/proxy/route"},resolvedPagePath:"/home/aadit/sheet-ops/app/api/chat/proxy/route.ts",nextConfigOutput:"",userland:o}),{requestAsyncStorage:h,staticGenerationAsyncStorage:x,serverHooks:m}=l,y="/api/chat/proxy/route";function g(){return(0,n.patchFetch)({serverHooks:m,staticGenerationAsyncStorage:x})}}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),o=t.X(0,[276,972],()=>r(7703));module.exports=o})();